before_script:
  - curl -O https://mirror.racket-lang.org/installers/6.9/racket-minimal-6.9-x86_64-linux.sh
  - chmod u+x racket-minimal-6.9-x86_64-linux.sh
  - ./racket-minimal-6.9-x86_64-linux.sh
  - /usr/racket/bin/raco pkg install --auto --skip-installed --batch br-parser-tools-lib base brag data-lib racket-doc rackunit-lib scribble-lib
  - /usr/racket/bin/raco pkg install --auto --no-setup ../rex

stages:
  - test

test:
  stage: test
  script:
    - /usr/racket/bin/raco setup --pkgs rex
    - /usr/racket/bin/raco test -p rex
